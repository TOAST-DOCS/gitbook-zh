## Compute > System Monitoring > 控制台使用指南
控制台使用指南介绍使用System Monitoring所需的基本内容。
- 服务器仪表板
- 用户组
- 警报组

## 服务器仪表板
在**Compute > System Monitoring > 服务器仪表板**中可确认监控对象实例列表与基本指标图表。
若无可监控的服务器，服务器列表为空。
此时应在**Compute > Instance**中确认正在使用的实例是否正常运行、监控对象实例是否安装System Monitoring Agent并正常运行。Agent安装方法请参考**Agent安装方法**章节。

若监控对象服务器实例正常安装Agent且System Monitoring收集指标数据，在左侧的服务器列表中显示相应实例。  选择实例，可在右侧图表中确认收集的指标数据。

### 服务器列表
可在服务器列表中选择所需服务器确认各服务器的指标。
服务器列表中显示服务器主机名、IP及监控状态的状态指示灯亮起。
状态指示灯的颜色根据当前监控状态有所不同。

- 绿色：正常
- 黄色：无法得知实例信息，但仍为监控执行状态
- 红色：运行中的实例监控中断的状态
- 深灰色：运行中断的实例
- 浅灰色：删除的实例

将鼠标光标移至状态显示灯上时，可在显示的提示框中确认实例与Agent的状态值。

在**Compute > Instance**中删除的服务器实例默认不在服务器仪表板的服务器列表中显示。但会保存指标数据，不会删除。若欲确认删除的实例的指标，选择**也查看删除的服务器**。

### 默认布局
最初**Compute > System Monitoring > 服务器仪表板**显示的图表排列为**默认布局**。是无需另行设置即可使用的默认布局。显示**CPU Used**、**Memory Used(excepted cache/buffer)**、**Disk**、**Network(In/Out bps)**图表。
“默认布局”是System Monitoring中默认提供的布局，因此用户无法自己构建图表。

### 创建布局
若欲添加新指标或按照需要排列图表，则需要新的布局。若欲创建布局，单击服务器仪表板上端的**创建布局按钮**。每个项目最多可创建5个布局。

在**创建布局**窗口中输入名称后单击**创建**按钮，即可创建新的布局。因为没有注册的图表，所以显示空白界面。若欲添加新图表，按照界面指南单击**添加图表**按钮。

### 创建图表
单击**添加图表**按钮，显示可选择的指标列表。

右侧显示当前System Monitoring提供的指标列表，从中选择一个，在左侧显示图表预览。单击**添加**按钮，所选图表添加至布局下端。

自行创建的布局可按照用户需要调节图表位置和大小。用户添加的图表中提供如下附加功能。

- 单击右上端图标：从布局中删除图表。
- 拖动右下端图标：可调节图表的大小。
- 拖动图表标题：可更改图表的位置。

创建的布局可在上端的布局下拉菜单中选择。

### 修改/删除布局
单击**管理布局**按钮，可更改特定布局的名称或删除不需要的布局。

### 选择日期
收集的指标数据最多保存5年。单击右上端的**日历**按钮，设置要查询的范围。

在**搜索日期**窗口中选择要指定为查询时间的**开始时间(From)**与**结束时间(To)**。选择开始时间与结束时间的方式有两种。
第一种方式是直接选择时间。单击开始时间、结束时间，弹出时间选择窗口。在时间选择窗口中可直接指定时间。

第二种方式是使用快捷按钮。各时间按钮下方有当前、1小时、1天等按钮。单击所需按钮可指定时间范围。单击快捷按钮，下方显示导入哪一时间范围数据的指南。（范例：搜索从**7天前**至**当前**的数据。）

与日期选择窗口不同的其他日期范围选择方法是在图表中直接选择查询时间。横向拖动欲在图表中查看的时间，可选择区域，确认相应区域时间内的数据。可在图表中选择显示特别状态的区间集中观察。

## 用户组
在**Compute > System Monitoring > 用户组**中可指定System Monitoring监控的对象中发生特定事件时接收警报的对象。可选择项目成员中接收警报的成员，可将接收警报的用户组进行分组管理。

若无用户组，首次查询用户组时显示空白界面。若欲从System Monitoring接收警报，应按照界面指南添加用户组。

### 创建用户组
若欲创建用户组，在**Compute > System Monitoring > 用户组**中单击**创建组按钮**。

在**创建组**窗口中输入名称后单击**创建**按钮，即可创建用户组。然后自动跳转至下一步，可将项目成员添加到用户组中。

在**编辑用户组**窗口下端显示当前项目中的用户列表。单击用户列表各项目右侧的**添加**按钮，可添加至相应用户组。可以在之后要联动的警报组中，设置向用户组中的用户发送警报。

创建用户组后可在**Compute > System Monitoring > 用户组**中查询用户组列表。

### 修改用户组
若欲修改已创建的用户组，在用户列表组中单击**编辑**按钮。单击**编辑**按钮，弹出**编辑用户组**窗口。可按照与创建步骤相同的方法修改用户组的成员。

若欲修改用户组名，单击用户组名右侧的铅笔图标即可。

## 警报组
警报组可在**Compute > System Monitoring > 警报组**中管理。警报组的两个作用如下。
- 可为各系统指标设置临界值。在System Monitoring中为系统指标设置临界值称为**监控设置**。若选择的系统指标达到临界值，则向指定的用户组发出警报。
- 创建的监控设置与监控对象服务器关联，也可联动作为通报对象的用户组。实际上通报组可以说是起到了连接服务器仪表板与用户组的作用。

若无警报组，首次查询警报组时显示空白界面。若欲为系统指标设置临界值并向需要的用户组发送警报，应按照界面中的指南添加警报组。

### 创建警报组
单击**创建组**按钮，可创建新警报组。

在**创建组**窗口中输入组名并单击**创建**按钮，即可添加警报组。

### 注册/修改/删除监控设置
若欲注册监控设置，单击警报组项目按钮中左侧的**添加监控设置**按钮。若未注册监控设置，则不显示任何内容。若欲添加新的监控设置，单击**添加监控设置**按钮。添加新的监控设置输入栏时，监控设置未保存。为需要的系统指标指定临界值并单击**保存**按钮，保存最终的监控设置。单击**取消**按钮，即可删除输入栏。

保存的监控设置可单击右侧的铅笔图标进行重新修改，若单击垃圾桶图标，则可删除。

当前可设置监控的系统指标项目如下。

| 项目 | 单位 | 比较方式 | 附加要求值 |
| --- | --- | --- | --- |
| 重启 | 重启 | - | - |
| CPU:Used | % | 以上/以下 | - |
| CPU:Idle | % | 以上/以下 | - |
| CPU:User | % | 以上/以下 | - |
| CPU:System | % | 以上/以下 | - |
| CPU:nice | % | 以上/以下 | - |
| CPU:irq | % | 以上/以下 | - |
| CPU:softirq | % | 以上/以下 | - |
| CPU:io wait | % | 以上/以下 | - |
| Load Average:1 Min | - | 以上/以下 | - |
| Load Average:5 Min | - | 以上/以下 | - |
| Load Average:15 Min | - | 以上/以下 | - |
| Memory:Used | % | 以上/以下 | - |
| Memory:Used | MB | 以上/以下 | - |
| Memory:Free | MB | 以上/以下 | - |
| Memory:Buffers | MB | 以上/以下 | - |
| Memory:Cached | MB | 以上/以下 | - |
| Memory:pgpgin | KB/s | 以上/以下 | - |
| Memory:pgpgout | KB/s | 以上/以下 | - |
| Swap:Used | % | 以上/以下 | - |
| Swap:Total | MB | 以上/以下 | - |
| Swap:Used | MB | 以上/以下 | - |
| Disk:Read | Counts | 以上/以下 | - |
| Disk:Write | Counts | 以上/以下 | - |
| Disk:Read | Bytes | 以上/以下 | - |
| Disk:Write | Bytes | 以上/以下 | - |
| File System:Used | MB | 以上/以下 | `分区名` |
| File System:Avail | MB | 以上/以下 | `分区名` |
| File System:Used | % | 以上/以下 | `分区名` |
| File System:i-node Used | % | 以上/以下 | `分区名` |
| File System:Mount | - | 包含/不包含 | - | `分区名` |
| Network:Recv | Bytes/s | 以上/以下 | `接口名` |
| Network:Send | Bytes/s | 以上/以下 | `接口名` |
| Network:Recv Packets | pps| 以上/以下 | `接口名` |
| Network:Send Packets | pps | 以上/以下 | `接口名` |
| Network:Recv Error | Counts | 以上/以下 | `接口名` |
| Network:Send Error | Counts | 以上/以下 | `接口名` |
| Network:Collision | Counts | 以上/以下 | `接口名` |
| User:User Count | - | 以上/以下 | `接口名` |
| Process:Total Count | - | 以上/以下 | - |
| Process:Down | - | - | - | `流程名` |
| Process:Count | - | 以上/以下 | `流程名` |
| Process:CPU | % | 以上/以下 | `流程名` |
| Process:Memory | % | 以上/以下 | `流程名` |
| Process:Memory | KB | 以上/以下 | `流程名` |
| Process:Thread Count| - | 以上/以下 | `流程名` |
| Process:Restart | - | - | `流程名` |
| File:Content | TEXT | 包含/不包含 | `File Path` |
| File:Size | KB | 以上/以下 | `File Path` |
| File:Modification | - | - | `File Path` |
| File:Non-Modification | - | - | `File Path` |
| File:Non-Exist| - | - | `File Path` |

各监控项目带有固有值单位，根据项目，除临界值外可能还会要求其他值。

#### 监控设置持续时间
监控设置的持续时间为重要的元素。持续时间在监控对象到达指定临界值后，作为条件来指定状态持续的时间时使用。例如，若CPU使用率的临界值为90%以上且持续时间为5分钟，那么当与相应警报组联动的服务器的CPU使用率为90%以上的状态持续5分钟以上时，向用户组中定义的用户发送警报。如果起初CPU使用率为90%以上，但5分钟以内降至不足90%，则不发出警报。

### 设置监控对象及通报对象
如果要应用前面定义的监控设置的监控对象服务器符合监控条件，则可以连接接收警报的用户组。单击**监控设置**按钮右侧的**关联服务器及用户组**按钮。

在上端指定需在相应警报组指定反映定义的监控设置的服务器。在下端指定符合监控条件时接收警报的用户组。若欲取消选择，可单击服务器或用户组名右侧的**X**按钮，或在下拉菜单中重新选择。

然后可在**Compute > System Monitoring > 警报组**中查询设置的警报组列表。


## Agent安装方法

### Linux
1. 需要root权限
2. 确认实例内有无安装脚本
    * 请确认以下路径里有无脚本文件。 
    * `/opt/toast-sysmon-install.sh`

3. 下载安装脚本
    * 如果没有第2项中确认的文件，请在以下链接中下载。
    * https://static.toastoven.net/toastcloud/sdk_download/monitoring/toast-sysmon-install.sh

4. 在服务器中运行安装脚本
    * 在服务器中运行安装脚本后，当安装完成时自动开始监控。


### Windows
1. 需要Administrator权限
2. 确认实例内有无安装脚本
    * 请确认以下路径里有无脚本文件。
    * `C:\Program Files(x86)\NHN\toast-sysmon-install.ps1`

3. 下载安装脚本
    * 如果没有第2项中确认的文件，请在以下链接中下载。
    * https://static.toastoven.net/toastcloud/sdk_download/monitoring/toast-sysmon-install.ps1

4. 在服务器中运行安装脚本
    * 在服务器中运行安装脚本后，当安装完成时自动开始监控。